/*! For license information please see 2c5f8f7fa5e11dc50007.js.LICENSE.txt */
(self.webpackChunkaf_virtual_scroll=self.webpackChunkaf_virtual_scroll||[]).push([[963],{66980:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var r=s(85893),o=s(19756),a=s(67294),l=s(40074),n=s(68949);const i=(e,t,s,r)=>{const o=t.length-1;const a=t[o],l=new Map;for(let n of e){const e=s(n);let i,u,d=l;for(let s=0;s<o;s++){if(u=e[t[s]],i=d.get(u),!i){i=new Map;for(let e of r[s])d.has(e)||d.set(e,null);d.set(u,i)}d=i}if(u=e[a],i=d.get(u),i)i.push(n);else{for(let e of r[o])d.has(e)||d.set(e,null);d.set(u,[n])}}return l},u=(e,t,s)=>(r,o)=>{const a=e(r),l=e(o);if(a&&l){const e=a[t],r=l[t];return e>r?s:e<r?-s:0}return a?s:l?-s:0},d=(e,t,s,r,o,a=0)=>{const l=e.values();if(a<o-1)for(let e of l)e&&d(e,t,s,r,o,a+1);else{const e=u(t,s,r);for(let t of l)t&&t.sort(e)}},c=d,p=(e,t,s=[],r=[],o=[])=>{let a;for(let[l,n]of e)if(n){const e=s.concat(l);a=-r.push(e),o.push(a),t.has(a)||(Array.isArray(n)?o.push.apply(o,n):p(n,t,e,r,o))}return{groupValues:r,rowIndexes:o}},h=p;var g=s(24217);const m=class{get normalizedColumns(){return this.columns.map(g.Z)}get visibleColumns(){return this.normalizedColumns.filter((e=>!this.groupKeys.includes(e.dataKey)))}get priorityGroupValuesArray(){return this.groupKeys.map((e=>this.normalizedColumns.find((t=>t.dataKey===e)).priorityGroupValues||[]))}setFiltering(e,t){t?this.filtersMap.set(e,t.toLowerCase()):this.filtersMap.delete(e)}toggleCompact(){this.compact=!this.compact}setSorting(e){this.sortDataKey===e&&(this.sortDirection*=-1),this.sortDataKey=e}setGrouping(e){this.groupKeys=e}addGrouping(e){this.groupKeys.includes(e)||(this.groupKeys.push(e),this.collapsedGroups.clear())}toggleCollapsedGroup(e){this.collapsedGroups.has(e)?this.collapsedGroups.delete(e):this.collapsedGroups.add(e)}removeGrouping(e){const t=this.groupKeys.indexOf(e);-1!==t&&(this.groupKeys.splice(t,1),this.collapsedGroups.clear())}get orderedIndexes(){return Array.from({length:this.rowsQuantity},((e,t)=>t))}get grouped(){return i(this.filteredIndexes,this.groupKeys,this.getRowData,this.priorityGroupValuesArray)}get groupedSorted(){return this.sortDataKey&&c(this.grouped,this.getRowData,this.sortDataKey,this.sortDirection,this.groupKeys.length),this.grouped}get flattenedGroups(){return h(this.groupedSorted,this.collapsedGroups)}get filteredIndexes(){const{filtersMap:e,orderedIndexes:t}=this;if(this.filtersMap.size){return t.filter((t=>{const s=this.getRowData(t);for(let[t,r]of e)if(!(""+s[t]).toLowerCase().includes(r))return!1;return!0}))}return t}get noGroupsSortedIndexes(){return this.sortDataKey?this.filteredIndexes.sort(u(this.getRowData,this.sortDataKey,this.sortDirection)):this.filteredIndexes}get groupsSortedIndexes(){return this.flattenedGroups.rowIndexes}get hasGrouping(){return!!this.groupKeys.length}get finalIndexes(){return this.hasGrouping?this.groupsSortedIndexes:this.noGroupsSortedIndexes}constructor(){this.rowsQuantity=0,this.getRowData=null,this.columns=[],this.compact=!0,this.filtersMap=new Map,this.groupKeys=[],this.sortDataKey="",this.sortDirection=-1,this.collapsedGroups=new Set,(0,n.ky)(this,{normalizedColumns:(0,n.Fl)({equals:n.p6.structural}),visibleColumns:(0,n.Fl)({equals:n.p6.structural}),priorityGroupValuesArray:(0,n.Fl)({equals:n.p6.structural}),groupedSorted:(0,n.Fl)({equals:()=>!1}),groupsSortedIndexes:(0,n.Fl)({equals:()=>!1}),noGroupsSortedIndexes:(0,n.Fl)({equals:()=>!1}),finalIndexes:(0,n.Fl)({equals:()=>!1}),filteredIndexes:(0,n.Fl)({equals:()=>!1}),orderedIndexes:(0,n.Fl)({equals:()=>!1})})}merge(e){Object.assign(this,e)}};var f=s(39519),y=s(32857);const x="_2B3KY_2EhDdLzl3od9PxI3",K="_3xhCMieeqyydLLrsB_Rjwr",G="_7PdTV3zpJzO5l3JPCJbaz",w="_24CQvBWd2KIxalcwIBcG6S",D="_1Pfh0g4BE_cuNHu46ByRkY",I="_2t1GlnfqduCsfI_X7Q0BSx",j="QsUrLMXUKybinaPXO0z0B";var v=s(57865),C=s(84785),b=s(89862);const R=(0,l.P)((({m:e,dataKey:t,label:s})=>{const[o,a]=(0,C.useDrag)({item:{type:"h",dataKey:t}});return(0,r.jsx)("div",{ref:a,className:K,onClick:()=>e.setSorting(t),onDoubleClick:t=>t.ctrlKey&&e.toggleCompact(),"aria-sort":e.sortDataKey===t?1===e.sortDirection?"ascending":"descending":void 0,children:s})})),N=(0,l.P)((({m:e,dataKey:t})=>e.compact?null:(0,r.jsx)("input",{className:G,value:e.filtersMap.get(t)||"",onChange:s=>e.setFiltering(t,s.target.value)}))),S=e=>{let t=0;if(Array.isArray(e))t+=e.length;else for(let s of e.values())s&&(t+=S(s));return t},_=(e,t,s)=>{let r=0;if(Array.isArray(e)){let o;for(let a of e)o=s(a),r+=o[t]}else for(let o of e.values())o&&(r+=_(o,t,s));return r},k=(0,l.P)((({m:e,column:t,rowIndexes:s})=>{if("count"===t.totals)return S(s);if("sum"===t.totals){const r=_(s,t.dataKey,e.getRowData),o=t.formatTotal||t.format;return o?o(r):r}return null})),F=(0,l.P)((({m:e})=>{const[t,s]=(0,C.useDrop)({accept:"h",drop(t){e.addGrouping(t.dataKey)}});return e.compact?null:(0,r.jsx)("div",{className:w,ref:s,children:e.groupKeys.length?e.groupKeys.map((t=>(0,r.jsx)("div",{className:D,onDoubleClick:()=>e.removeGrouping(t),children:t},t))):"Drag column headers here to group by column"})})),A=(0,l.P)((({m:e,columns:t,idx:s})=>{const o=e.collapsedGroups.has(s);if(e.hasGrouping){const l=e.flattenedGroups.groupValues[~s];if(l){const n=l.length-1,i=e.groupKeys[n],{getGroupName:u,label:d}=e.normalizedColumns.find((e=>e.dataKey===i)),c=l[n];return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("span",{className:I,onClick:()=>e.toggleCollapsedGroup(s),"data-collapsed":o?"":void 0,style:{marginLeft:2*n+"em"}})," ",u?u(c):d,": ",""+c,t.length?(0,r.jsx)("span",{className:j,children:t.map((t=>{return t.totals?(0,r.jsxs)("span",{children:[t.label,":  ",(0,r.jsx)(k,{m:e,column:t,rowIndexes:(s=e.grouped,o=l,o.reduce(((e,t)=>e.get(t)),s))})]},t.dataKey):null;var s,o}))}):null]})}}return null})),P=e=>{let{rowsQuantity:t,getRowData:s,className:l,columns:n}=e,i=(0,o.Z)(e,["rowsQuantity","getRowData","className","columns"]);const[u]=(0,a.useState)((()=>new m)),{finalIndexes:d}=u;(0,a.useEffect)((()=>u.merge({rowsQuantity:t,getRowData:s,columns:n}))),(0,a.useEffect)((()=>{const e=u.visibleColumns.slice().sort(((e,t)=>(e.initialGrouingIndex||0)-(t.initialGrouingIndex||0))).filter((e=>e.initialGroupingIndex)).map((e=>e.dataKey));u.setGrouping(e)}),[]);return(0,r.jsx)(b.W,{backend:v.PD,children:(0,r.jsxs)("div",{className:(0,y.Z)(x,l),children:[(0,r.jsx)(F,{m:u}),(0,r.jsx)(f.Z,Object.assign({columns:u.visibleColumns,rowsQuantity:d.length,getRowData:s,renderRow:e=>{const t=d[e.index];return t<0?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:e.columns.length,children:(0,r.jsx)(A,{m:u,idx:t,columns:e.columns})})},e.index):(0,a.createElement)(e.Row,Object.assign({},e,{key:e.index,index:t}))},renderHeaderCells:e=>e.map((({dataKey:e,label:t})=>(0,r.jsxs)("th",{children:[(0,r.jsx)(R,{m:u,dataKey:e,label:t}),(0,r.jsx)(N,{m:u,dataKey:e})]},e))),renderFooter:e=>e.some((e=>!!e.totals))?(0,r.jsx)("tfoot",{children:(0,r.jsx)("tr",{children:e.map((e=>(0,r.jsx)("td",{children:(0,r.jsx)(k,{m:u,column:e,rowIndexes:u.filteredIndexes})},e.dataKey)))})}):null},i))]})})},q=(0,l.P)(P);var z=s(85384),M=s.n(z);const Q=Array.from({length:1e4},((e,t)=>({i:t,fixedRange:t%9,firstName:M().name.firstName(),lastName:M().name.lastName(),country:M().address.country()}))),V=e=>20+e%53+e%87,B=()=>(0,r.jsx)(q,{rowsQuantity:Q.length,getRowData:e=>Q[e],estimatedRowHeight:30,columns:[{dataKey:"i",totals:"sum",render:(e,t,s)=>(0,r.jsx)("div",{style:{color:"#000",textAlign:"center",lineHeight:V(s)+"px",background:"hsl("+11*s%360+",60%,60%)"},children:e})},{dataKey:"fixedRange",initialGroupingIndex:1,priorityGroupValues:[4,7,71,5]},{dataKey:"firstName",initialGroupingIndex:2,priorityGroupValues:["Dennis"],totals:"count"},"lastName","country"]})}}]);
//# sourceMappingURL=2c5f8f7fa5e11dc50007.js.map